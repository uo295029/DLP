<!-- Generated with VGen 2.0.0 -->

<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Attribute Grammar - TypeChecking</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Source+Sans+Pro&display=swap" rel="stylesheet">

<style type="text/css">
    body {
        font-family: 'Source Sans Pro', sans-serif;
        font-size: 14px;
        color: #595959;
    }

    table {
        border-collapse: collapse;
    }

    td {
        padding: 5px 10px 5px 10px;
        border: 1px solid #595959;
        vertical-align: top;
    }

    .table-header {
        color: #FFFFFF;
        background-color: #2980B9;
    }

    .symbol-name {
        font-weight: bold;
    }

    .parents {
        color: #A6A6A6;
    }

    .att-name {
        color: #F28A3E;
        font-size: 12px;
    }

    .att-type {
        color: #595959;
        padding-right: 3px;
    }

</style>

</head>

<body>

    <h2>Attribute Grammar - TypeChecking</h2>

    <h3>Attributes</h3>
    <table border="1" cellspacing="0">
        <tr class="table-header">
            <td>Symbol</td>
            <td>Attribute Name</td>
            <td>Java Type</td>
            <td>Inherited/Synthesized</td>
            <td>Description</td>
        </tr>

        <tr>
            <td>expression</td>
            <td>type</td>
            <td>Type</td>
            <td>Synthetized</td>
            <td>Tipo de la expresi贸n</td>
        </tr>

        <tr>
            <td>expression</td>
            <td>lvalue</td>
            <td>boolean</td>
            <td>Synthetized</td>
            <td>True si la expresi贸n puede aparecer en el lado izquierdo de una asignaci贸n</td>
        </tr>

        <tr>
            <td>statement</td>
            <td>function</td>
            <td>FunctionDefinition</td>
            <td>Inherited</td>
            <td>Funci贸n a la que pertenece la sentencia</td>
        </tr>
    </table>

    <h3>Auxiliary Functions</h3>
    <table border="1" cellspacing="0">
        <tr class="table-header">
            <td>Name</td>
            <td>Description</td>
        </tr>

        <tr>
            <td>isArithmetic(Type t)</td>
            <td>True si es de tipo int o float</td>
        </tr>

        <tr>
            <td>sameType(Expression a, Expression b)</td>
            <td>True si el tipo de a y de b es el mismo</td>
        </tr>

        <tr>
            <td>sameTypeList(List<Expression> a, List<VarDefinition> b)</td>
            <td>True si los tipos de los elementos de las listas coinciden par a par</td>
        </tr>
    </table>

    <h3>Rules</h3>
    <table>
        <tr class="table-header">
            <td>Node</td>
            <td>Predicates</td>
            <td>Semantic Functions</td>
        </tr>

        <tr>
            <td><span class="symbol-name">program</span> &rarr; <span class="att-type">definition*</span></td>
            <td></td>
            <td></td>
        </tr>

        <tr>
            <td><span class="symbol-name">functionDefinition</span><span class="parents">:definition</span> &rarr; <span class="att-name">name</span>:<span class="att-type">string</span> <span class="att-name">params</span>:<span class="att-type">varDefinition*</span> <span class="att-type">type</span> <span class="att-name">v</span>:<span class="att-type">varDefinition*</span> <span class="att-name">s</span>:<span class="att-type">statement*</span></td>
            <td>
                params.stream().allMatch(param -> param.getType()isSimple()) <br>
                type.isSimple() || type instanceof VoidType <br>
            </td>
            <td>
                s.forEach(stmt -> stmt.function = functionDefinition) <br>
            </td>
        </tr>

        <tr>
            <td><span class="symbol-name">varDefinition</span><span class="parents">:definition</span> &rarr; <span class="att-name">name</span>:<span class="att-type">string</span> <span class="att-type">type</span></td>
            <td></td>
            <td></td>
        </tr>

        <tr>
            <td><span class="symbol-name">structDefinition</span><span class="parents">:definition</span> &rarr; <span class="att-name">name</span>:<span class="att-type">string</span> <span class="att-name">attributes</span>:<span class="att-type">attribute*</span></td>
            <td></td>
            <td></td>
        </tr>

		<tr>
		    <td><span class="symbol-name">assignment</span><span class="parents">:statement</span> &rarr; <span class="att-name">left</span>:<span class="att-type">expression</span> <span class="att-name">right</span>:<span class="att-type">expression</span></td>
		    <td>
		        sameType(left, right) <br>
		        left.type.isSimple() <br>
		        left.isLvalue() <br>
		    </td>
		    <td></td>
		</tr>

		<tr>
		    <td><span class="symbol-name">functionCallS</span><span class="parents">:statement</span> &rarr; <span class="att-name">name</span>:<span class="att-type">string</span> <span class="att-name">params</span>:<span class="att-type">expression*</span></td>
		    <td>
		        params.size() ==  functionCallS.getFunctionDefinition().getParams().size()<br> 
				sameTypeList(params, functionCallS.getFunctionDefinition().getParams())
		    </td>
		    <td></td>
		</tr>

		<tr>
		    <td><span class="symbol-name">return</span><span class="parents">:statement</span> &rarr; <span class="att-type">expression?</span></td>
		    <td>
		        (expression == null) ? return.functionReturn.type instanceof VoidType : return.gerFunction().getType().getClass() == expression.getType().getClass() <br>
		    </td>
		    <td></td>
		</tr>
		
        <tr>
            <td><span class="symbol-name">if</span><span class="parents">:statement</span> &rarr; <span class="att-name">condition</span>:<span class="att-type">expression</span> <span class="att-name">yes</span>:<span class="att-type">statement*</span> <span class="att-name">no</span>:<span class="att-type">statement*</span></td>
            <td>
                condition.getType() instanceof IntType <br>
            </td>
            <td>
                yes.stream().forEach(stmt -> stmt.setFunction(if.getFunction())) <br>
                no.stream().forEach(stmt -> stmt.setFunction(if.getFunction())) 
            </td>
        </tr>

        <tr>
            <td><span class="symbol-name">while</span><span class="parents">:statement</span> &rarr; <span class="att-name">condition</span>:<span class="att-type">expression</span> <span class="att-name">yes</span>:<span class="att-type">statement*</span></td>
            <td>
                condition.getType() instanceof IntType <br>
            </td>
            <td>
				yes.stream().forEach(stmt -> stmt.setFunction(while.getFunction()))
            </td>
        </tr>

        <tr>
            <td><span class="symbol-name">print</span><span class="parents">:statement</span> &rarr; <span class="att-type">expression*</span></td>
            <td>
                expression*.stream().allMatch(expr -> expr.getType().isSimple()) <br>
            </td>
            <td></td>
        </tr>

        <tr>
            <td><span class="symbol-name">printsp</span><span class="parents">:statement</span> &rarr; <span class="att-type">expression*</span></td>
            <td>
                expression*.stream().allMatch(expr -> expr.getType().isSimple()) <br>
            </td>
            <td></td>
        </tr>

        <tr>
            <td><span class="symbol-name">println</span><span class="parents">:statement</span> &rarr; <span class="att-type">expression*</span></td>
            <td>
                expression*.stream().allMatch(expr -> expr.getType().isSimple()) <br>
            </td>
            <td></td>
        </tr>

		<tr>
		    <td><span class="symbol-name">read</span><span class="parents">:statement</span> &rarr; <span class="att-type">expression</span></td>
		    <td>
		        expression.getType().isSimple() <br>
		        expression.isLValue() <br>
		    </td>
		    <td></td>
		</tr>

		<tr>
		    <td><span class="symbol-name">variable</span><span class="parents">:expression</span> &rarr; <span class="att-name">name</span>:<span class="att-type">string</span></td>
		    <td></td>
		    <td>
		        variable.setType(variable.getVarDefinition().getType()) <br>
		        variable.setLvalue(true)
		    </td>
		</tr>
		
		<tr>
            <td><span class="symbol-name">intLiteral</span><span class="parents">:expression</span> &rarr; <span class="att-name">value</span>:<span class="att-type">int</span></td>
            <td></td>
            <td>
                intLiteral.setType(new IntType()) <br>
                intLiteral.setLValue(false) <br>
            </td>
        </tr>

        <tr>
            <td><span class="symbol-name">floatLiteral</span><span class="parents">:expression</span> &rarr; <span class="att-name">value</span>:<span class="att-type">float</span></td>
            <td></td>
            <td>
                floatLiteral.setType(new FloatType()) <br>
                floatLiteral.setLValue(false) <br>
            </td>
        </tr>

        <tr>
            <td><span class="symbol-name">charLiteral</span><span class="parents">:expression</span> &rarr; <span class="att-name">value</span>:<span class="att-type">char</span></td>
            <td></td>
            <td>
                charLiteral.setType(new CharType()) <br>
                charLiteral.setLValue(false) <br>
            </td>
        </tr>

        <tr>
            <td><span class="symbol-name">arithmetic</span><span class="parents">:expression</span> &rarr; <span class="att-name">left</span>:<span class="att-type">expression</span> <span class="att-name">operator</span>:<span class="att-type">string</span> <span class="att-name">right</span>:<span class="att-type">expression</span></td>
            <td>
                sameType(left.type, right.type) <br>
                (operator == "%") ? left.getType() instanceof IntType : isArithmetic(left.getType()) <br>
            </td>
            <td>
                arithmetic.setType(left.getType()) <br>
                arithmetic.setLValue(false) <br>
            </td>
        </tr>

        <tr>
            <td><span class="symbol-name">negate</span><span class="parents">:expression</span> &rarr; <span class="att-type">expression</span></td>
            <td>
                expression.getType() instanceof IntType <br>
            </td>
            <td>
                negate.setType(new IntType()) <br>
                negate.setLValue(false)
            </td>
        </tr>

        <tr>
            <td><span class="symbol-name">logic</span><span class="parents">:expression</span> &rarr; <span class="att-name">left</span>:<span class="att-type">expression</span> <span class="att-name">operator</span>:<span class="att-type">string</span> <span class="att-name">right</span>:<span class="att-type">expression</span></td>
            <td>
                left.getType() instanceof IntType <br>
                right.getType() instanceof IntType <br>
            </td>
            <td>
                logic.setType(new IntType()) <br>
				logic.setLValue(false)
            </td>
        </tr>

        <tr>
            <td><span class="symbol-name">attributeAccess</span><span class="parents">:expression</span> &rarr; <span class="att-name">left</span>:<span class="att-type">expression</span> <span class="att-name">right</span>:<span class="att-type">string</span></td>
            <td>
                left.getType() instanceof StructType <br>
                ((StructType) left.getType()).getStructDefinition().getAttributes().contains(right) <br>
            </td>
            <td>
                access.type = ((StructType) left.geType()).getStructDefinition().getAttributes().get(right).getType() <br>
                access.setLValue(true)
            </td>
        </tr>

		<tr>
		    <td><span class="symbol-name">comparison</span><span class="parents">:expression</span> &rarr; <span class="att-name">left</span>:<span class="att-type">expression</span> <span class="att-name">operator</span>:<span class="att-type">string</span> <span class="att-name">right</span>:<span class="att-type">expression</span></td>
		    <td>
		        sameType(left, right) <br>
		        isArithmetic(left.type) <br>
		    </td>
		    <td>
		        comparation.setType(new IntType()) <br>
		        comparation.setLValue(false)
		    </td>
		</tr>

        <tr>
            <td><span class="symbol-name">arrayAccess</span><span class="parents">:expression</span> &rarr; <span class="att-name">left</span>:<span class="att-type">expression</span> <span class="att-name">right</span>:<span class="att-type">expression</span></td>
            <td>
                left.getType() instanceof ArrayType <br>
                right.getType() instanceof IntType <br>
            </td>
            <td>
                arrayAccess.setType((ArrayType) left.getType()).getType()) <br>
                arrayAccess.setLValue(true)
            </td>
        </tr>

        <tr>
            <td><span class="symbol-name">cast</span><span class="parents">:expression</span> &rarr; <span class="att-name">castType</span>:<span class="att-type">type</span> <span class="att-type">expression</span></td>
            <td>
                castType.getClass() != expression.getType().getClass() <br>
                castType.isSimple() <br>
                expression.getType().isSimple() <br>
            </td>
            <td>
                cast.setType(castType) <br>
                cast.setLValue(false) <br>
            </td>
        </tr>
		
        <tr>
            <td><span class="symbol-name">functionCallE</span><span class="parents">:expression</span> &rarr; <span class="att-name">name</span>:<span class="att-type">string</span> <span class="att-name">params</span>:<span class="att-type">expression*</span></td>
            <td>
                params.size() == functionCallE.getFunctionDefinition().getParams().size() <br> <br>
                sameTypeList(params, functionCallE.getFunctionDefinition().getParams()) <br>
                !(functionCallE.getFunctionDefinition().getType() instanceof VoidType) <br>
            </td>
            <td>
                functionCallE.setType(functionCallE.getFunctionDefinition().getType()) <br> <br>
                functionCallE.setLValue(false) <br>
            </td>
        </tr>

        <tr>
            <td><span class="symbol-name">attribute</span> &rarr; <span class="att-name">name</span>:<span class="att-type">string</span> <span class="att-type">type</span></td>
            <td></td>
            <td></td>
        </tr>

        <tr>
            <td><span class="symbol-name">intType</span><span class="parents">:type</span> &rarr; &epsilon;</td>
            <td></td>
            <td></td>
        </tr>

        <tr>
            <td><span class="symbol-name">floatType</span><span class="parents">:type</span> &rarr; &epsilon;</td>
            <td></td>
            <td></td>
        </tr>

        <tr>
            <td><span class="symbol-name">charType</span><span class="parents">:type</span> &rarr; &epsilon;</td>
            <td></td>
            <td></td>
        </tr>

        <tr>
            <td><span class="symbol-name">arrayType</span><span class="parents">:type</span> &rarr; <span class="att-name">size</span>:<span class="att-type">int</span> <span class="att-type">type</span></td>
            <td></td>
            <td></td>
        </tr>

        <tr>
            <td><span class="symbol-name">structType</span><span class="parents">:type</span> &rarr; <span class="att-name">name</span>:<span class="att-type">string</span></td>
            <td></td>
            <td></td>
        </tr>

        <tr>
            <td><span class="symbol-name">voidType</span><span class="parents">:type</span> &rarr; &epsilon;</td>
            <td></td>
            <td></td>
        </tr>

    </table>

    <br>
    Operators samples (cut &amp; paste if needed):<br> &rArr; &hArr; &ne; &empty; &isin; &notin; &cup; &cap; &sub; &nsub; &sum; &exist; &forall;

</body>

</html>
